# Avito Internship

* Реализован сервис позволяющий производить эксперименты по добавлению/удалению пользователей в сегменты.
* Сервис дает возможность:
1) создавать новые сегменты 
`/api/segment/create`;
2) добавлять пользователя в сегмент
`/api/user/add_segment`;
3) добавлять пользователю несколько сегментов
`/api/user/add_segments`;
4) удалять пользователя из сегмента
`/api/user/remove_segment`;
5) удалять пользователя из нескольких сегментов
`/api/user/remove_segments`;
6) получать информацию о пользователе с сегментами
`/api/user/get/:id`;
7) обновлять сегменты пользователя
`/api/user/update`;
8) получать активные сегменты пользователя
`/api/user/get/active_segments/:id`;
9) получать добавленные сегменты:
`/api/segment/get/all`;
10) создавать пользователя
`/api/user/create/:id`;
11) генерировать csv отчет истории присоединения/отсоединения пользователя по промежутку времени
`/api/user/get/csv`;

Примеры API вызовов [здесь](./avito2.postman_collection.json)

Помимо этого ознакомиться с API вызовами можно череез Swagger:
`host//swagger/index.html`;

# Запуск приложения
Для запуска приложения необходимо поднять контейнер с PostgreSQL:
1) `sudo docker-compose avito-internship build`;
2) `sudo docker-compose up -d`;

Пароль для подключения приложения к базе данных необходимо добавить в переменные .env в переменную `DB_PASSWORD`

Чтобы запустить приложение необходимо выполнить:
`go run .\cmd\avito_back_intership\main.go`;

